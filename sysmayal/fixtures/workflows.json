[
  {
    "doctype": "Workflow",
    "name": "R&D Project Approval",
    "document_type": "Product Development Project",
    "workflow_name": "R&D Project Approval",
    "is_active": 1,
    "send_email_alert": 1,
    "workflow_state_field": "workflow_state",
    "states": [
      {
        "state": "Draft",
        "doc_status": "0",
        "allow_edit": "R&D Manager",
        "is_optional_state": 0
      },
      {
        "state": "Pending Review",
        "doc_status": "0",
        "allow_edit": "R&D Manager",
        "is_optional_state": 0
      },
      {
        "state": "Budget Approval Required",
        "doc_status": "0",
        "allow_edit": "Distribution Manager",
        "is_optional_state": 0
      },
      {
        "state": "Approved",
        "doc_status": "1",
        "allow_edit": null,
        "is_optional_state": 0
      },
      {
        "state": "Rejected",
        "doc_status": "1",
        "allow_edit": "R&D Manager",
        "is_optional_state": 0
      },
      {
        "state": "Revision",
        "doc_status": "0",
        "allow_edit": "R&D Manager",
        "is_optional_state": 0
      }
    ],
    "transitions": [
      {
        "state": "Draft",
        "action": "Submit for Review",
        "next_state": "Pending Review",
        "allowed": "R&D Manager"
      },
      {
        "state": "Pending Review",
        "action": "Request Budget Approval",
        "next_state": "Budget Approval Required",
        "allowed": "R&D Manager",
        "condition": "doc.estimated_investment > 100000"
      },
      {
        "state": "Pending Review",
        "action": "Approve",
        "next_state": "Approved",
        "allowed": "R&D Manager",
        "condition": "doc.estimated_investment <= 100000"
      },
      {
        "state": "Pending Review",
        "action": "Reject",
        "next_state": "Rejected",
        "allowed": "R&D Manager"
      },
      {
        "state": "Budget Approval Required",
        "action": "Approve Budget",
        "next_state": "Approved",
        "allowed": "Distribution Manager"
      },
      {
        "state": "Budget Approval Required",
        "action": "Reject Budget",
        "next_state": "Rejected",
        "allowed": "Distribution Manager"
      },
      {
        "state": "Rejected",
        "action": "Request Revision",
        "next_state": "Revision",
        "allowed": "R&D Manager"
      },
      {
        "state": "Revision",
        "action": "Resubmit",
        "next_state": "Pending Review",
        "allowed": "R&D Manager"
      }
    ]
  }
]
